<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{{ bot_name }} â€” Trader Analysis Assistant</title>
    <style>
        :root{--bg:#0b1220;--card:#0f1a2b;--muted:#9aa7bf;--accent:#17c964;--danger:#ff4d4f}
        body{margin:0;font-family:Inter,Segoe UI,Helvetica,Arial;background:linear-gradient(180deg,#071026 0%,#081324 100%);color:#e6eef8}
        .container{max-width:1100px;margin:32px auto;padding:20px}
        .header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
        .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,#0f89ff,#17c964);display:flex;align-items:center;justify-content:center;font-weight:700}
        .brand h1{margin:0;font-size:20px}
        .brand p{margin:0;color:var(--muted);font-size:13px}
        .main{display:flex;gap:18px}
        .sidebar{width:260px;background:var(--card);padding:16px;border-radius:10px}
        .chatbox{flex:1;display:flex;flex-direction:column;background:rgba(255,255,255,0.02);border-radius:10px;padding:12px}
        .messages{flex:1;overflow:auto;padding:6px;display:flex;flex-direction:column;gap:10px}
        .message{max-width:75%;padding:10px;border-radius:10px}
        .message.user{align-self:flex-end;background:#0b2840}
        .message.bot{align-self:flex-start;background:#102034}
        .sender{font-size:12px;color:var(--muted);margin-bottom:6px}
        .input-area{display:flex;gap:8px;padding-top:8px}
        .input-area input{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
        .input-area button{padding:10px 14px;border-radius:8px;border:none;background:var(--accent);color:#012;cursor:pointer;font-weight:600}
        .stat{margin:10px 0;padding:8px;background:rgba(255,255,255,0.02);border-radius:6px}
        .trend{color:var(--accent);font-weight:700}
        footer{margin-top:10px;color:var(--muted);font-size:13px}
    </style>
    <script>
        function scrollBottom(){const m=document.querySelector('.messages');if(m) m.scrollTop=m.scrollHeight}
        window.addEventListener('load',scrollBottom)
    </script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">TM</div>
            <div class="brand">
                <h1>{{ bot_name }}</h1>
                <p>Market analysis & trading assistant</p>
            </div>
        </header>

        <main class="main">
            <aside class="sidebar">
                <h3>Market Snapshot</h3>
                {% if summary %}
                    <div class="stat">Close: <strong>{{ summary.close }}</strong></div>
                    <div class="stat">Date: <strong>{{ summary.date }}</strong></div>
                {% else %}
                    <div class="stat">No summary available</div>
                {% endif %}
                <div class="stat">Trend: <strong class="trend">{{ trend }}</strong></div>
                <footer>Try: "summary" or "trend"</footer>
            </aside>

            <section class="chatbox">
                <div class="messages">
                    {% for sender, message in chat %}
                        <div class="message {% if sender == 'You' %}user{% else %}bot{% endif %}">
                            <div class="sender">{{ sender }}</div>
                            <div class="text">{{ message }}</div>
                        </div>
                    {% endfor %}
                </div>

                <form method="post" action="/chat" class="input-area">
                    <input type="text" name="message" placeholder="Ask for summary, trend, or type a question..." required autocomplete="off">
                    <button type="submit">Send</button>
                </form>
            </section>
        </main>
    </div>
</body>
</html>
